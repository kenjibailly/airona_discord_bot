import { useState } from "react";
import styles from "../styles/EmojiPicker.module.css";

// Common Unicode emojis grouped by category
const standardEmojis = {
  Smileys: [
    "ðŸ˜€",
    "ðŸ˜ƒ",
    "ðŸ˜„",
    "ðŸ˜",
    "ðŸ˜†",
    "ðŸ˜…",
    "ðŸ¤£",
    "ðŸ˜‚",
    "ðŸ™‚",
    "ðŸ™ƒ",
    "ðŸ˜‰",
    "ðŸ˜Š",
    "ðŸ˜‡",
    "ðŸ¥°",
    "ðŸ˜",
    "ðŸ¤©",
    "ðŸ˜˜",
    "ðŸ˜—",
    "ðŸ˜š",
    "ðŸ˜™",
    "ðŸ˜‹",
    "ðŸ˜›",
    "ðŸ˜œ",
    "ðŸ¤ª",
    "ðŸ˜",
    "ðŸ¤‘",
    "ðŸ¤—",
    "ðŸ¤­",
    "ðŸ¤«",
    "ðŸ¤”",
    "ðŸ¤",
    "ðŸ¤¨",
    "ðŸ˜",
    "ðŸ˜‘",
    "ðŸ˜¶",
    "ðŸ˜",
    "ðŸ˜’",
    "ðŸ™„",
    "ðŸ˜¬",
    "ðŸ¤¥",
    "ðŸ˜Œ",
    "ðŸ˜”",
    "ðŸ˜ª",
    "ðŸ¤¤",
    "ðŸ˜´",
  ],
  Gestures: [
    "ðŸ‘",
    "ðŸ‘Ž",
    "ðŸ‘Š",
    "âœŠ",
    "ðŸ¤›",
    "ðŸ¤œ",
    "ðŸ¤ž",
    "âœŒï¸",
    "ðŸ¤Ÿ",
    "ðŸ¤˜",
    "ðŸ‘Œ",
    "ðŸ¤",
    "ðŸ‘ˆ",
    "ðŸ‘‰",
    "ðŸ‘†",
    "ðŸ‘‡",
    "â˜ï¸",
    "âœ‹",
    "ðŸ¤š",
    "ðŸ–ï¸",
    "ðŸ––",
    "ðŸ‘‹",
    "ðŸ¤™",
    "ðŸ’ª",
    "ðŸ–•",
    "âœï¸",
    "ðŸ™",
    "ðŸ¦¶",
    "ðŸ¦µ",
  ],
  Hearts: [
    "â¤ï¸",
    "ðŸ§¡",
    "ðŸ’›",
    "ðŸ’š",
    "ðŸ’™",
    "ðŸ’œ",
    "ðŸ–¤",
    "ðŸ¤",
    "ðŸ¤Ž",
    "ðŸ’”",
    "â£ï¸",
    "ðŸ’•",
    "ðŸ’ž",
    "ðŸ’“",
    "ðŸ’—",
    "ðŸ’–",
    "ðŸ’˜",
    "ðŸ’",
  ],
  Animals: [
    "ðŸ¶",
    "ðŸ±",
    "ðŸ­",
    "ðŸ¹",
    "ðŸ°",
    "ðŸ¦Š",
    "ðŸ»",
    "ðŸ¼",
    "ðŸ¨",
    "ðŸ¯",
    "ðŸ¦",
    "ðŸ®",
    "ðŸ·",
    "ðŸ¸",
    "ðŸµ",
    "ðŸ”",
    "ðŸ§",
    "ðŸ¦",
    "ðŸ¤",
    "ðŸ¦†",
    "ðŸ¦…",
    "ðŸ¦‰",
    "ðŸ¦‡",
    "ðŸº",
    "ðŸ—",
    "ðŸ´",
    "ðŸ¦„",
    "ðŸ",
    "ðŸ›",
    "ðŸ¦‹",
    "ðŸŒ",
    "ðŸž",
    "ðŸ¢",
    "ðŸ",
    "ðŸ¦Ž",
    "ðŸ¦–",
    "ðŸ¦•",
    "ðŸ™",
    "ðŸ¦‘",
    "ðŸ¦",
    "ðŸ¦ž",
    "ðŸ¦€",
    "ðŸ¡",
    "ðŸ ",
    "ðŸŸ",
    "ðŸ¬",
    "ðŸ³",
    "ðŸ‹",
    "ðŸ¦ˆ",
  ],
  Food: [
    "ðŸŽ",
    "ðŸŠ",
    "ðŸ‹",
    "ðŸŒ",
    "ðŸ‰",
    "ðŸ‡",
    "ðŸ“",
    "ðŸˆ",
    "ðŸ’",
    "ðŸ‘",
    "ðŸ¥­",
    "ðŸ",
    "ðŸ¥¥",
    "ðŸ¥",
    "ðŸ…",
    "ðŸ†",
    "ðŸ¥‘",
    "ðŸ¥¦",
    "ðŸ¥¬",
    "ðŸ¥’",
    "ðŸŒ¶ï¸",
    "ðŸŒ½",
    "ðŸ¥•",
    "ðŸ§„",
    "ðŸ§…",
    "ðŸ¥”",
    "ðŸ ",
    "ðŸ¥",
    "ðŸ¥¯",
    "ðŸž",
    "ðŸ¥–",
    "ðŸ¥¨",
    "ðŸ§€",
    "ðŸ¥š",
    "ðŸ³",
    "ðŸ§ˆ",
    "ðŸ¥ž",
    "ðŸ§‡",
    "ðŸ¥“",
    "ðŸ¥©",
    "ðŸ—",
    "ðŸ–",
    "ðŸ¦´",
    "ðŸŒ­",
    "ðŸ”",
    "ðŸŸ",
    "ðŸ•",
  ],
  Activities: [
    "âš½",
    "ðŸ€",
    "ðŸˆ",
    "âš¾",
    "ðŸ¥Ž",
    "ðŸŽ¾",
    "ðŸ",
    "ðŸ‰",
    "ðŸ¥",
    "ðŸŽ±",
    "ðŸª€",
    "ðŸ“",
    "ðŸ¸",
    "ðŸ’",
    "ðŸ‘",
    "ðŸ¥",
    "ðŸ",
    "ðŸ¥…",
    "â›³",
    "ðŸª",
    "ðŸ¹",
    "ðŸŽ£",
    "ðŸ¤¿",
    "ðŸ¥Š",
    "ðŸ¥‹",
    "ðŸŽ½",
    "ðŸ›¹",
    "ðŸ›·",
    "â›¸ï¸",
    "ðŸ¥Œ",
    "ðŸŽ¿",
    "â›·ï¸",
    "ðŸ‚",
  ],
  Objects: [
    // Tech & Devices
    "âŒš",
    "ðŸ“±",
    "ðŸ“²",
    "ðŸ’»",
    "âŒ¨ï¸",
    "ðŸ–¥ï¸",
    "ðŸ–¨ï¸",
    "ðŸ–±ï¸",
    "ðŸ–²ï¸",
    "ðŸ•¹ï¸",
    "ðŸ—œï¸",
    "ðŸ’¾",
    "ðŸ’¿",
    "ðŸ“€",
    "ðŸ“¼",
    "ðŸ“·",
    "ðŸ“¸",
    "ðŸ“¹",
    "ðŸŽ¥",
    "ðŸ“½ï¸",
    "ðŸŽžï¸",
    "ðŸ“¡",
    "ðŸ“º",
    "ðŸ“»",
    "ðŸŽ™ï¸",
    "ðŸŽšï¸",
    "ðŸŽ›ï¸",
    "ðŸ§­",
    "â±ï¸",
    "â²ï¸",
    "â°",
    "ðŸ•°ï¸",
    "âŒ›",
    "â³",

    // Light, Tools, Construction
    "ðŸ”‹",
    "ðŸ”Œ",
    "ðŸ’¡",
    "ðŸ”¦",
    "ðŸ•¯ï¸",
    "ðŸ§¯",
    "ðŸª”",
    "ðŸ”§",
    "ðŸ”¨",
    "âš’ï¸",
    "ðŸ› ï¸",
    "â›ï¸",
    "ðŸª“",
    "ðŸ”©",
    "âš™ï¸",
    "ðŸª¤",
    "ðŸ§°",
    "ðŸª›",
    "ðŸ”«",
    "ðŸ§±",
    "ðŸªµ",
    "ðŸªœ",
    "âš–ï¸",
    "ðŸª£",
    "ðŸ§²",

    // Office & Stationery
    "ðŸ“",
    "ðŸ“‚",
    "ðŸ—‚ï¸",
    "ðŸ“…",
    "ðŸ“†",
    "ðŸ—’ï¸",
    "ðŸ—“ï¸",
    "ðŸ“‡",
    "ðŸ“ˆ",
    "ðŸ“‰",
    "ðŸ“Š",
    "ðŸ“‹",
    "ðŸ“Œ",
    "ðŸ“",
    "ðŸ“Ž",
    "ðŸ–‡ï¸",
    "ðŸ“",
    "ðŸ“",
    "âœ‚ï¸",
    "ðŸ–Šï¸",
    "ðŸ–‹ï¸",
    "âœ’ï¸",
    "ðŸ“",
    "âœï¸",
    "ðŸ–ï¸",
    "ðŸ–Œï¸",
    "ðŸ—ƒï¸",
    "ðŸ—„ï¸",
    "ðŸ—‘ï¸",

    // Money & Mail
    "ðŸ’°",
    "ðŸª™",
    "ðŸ’´",
    "ðŸ’µ",
    "ðŸ’¶",
    "ðŸ’·",
    "ðŸ’¸",
    "ðŸ’³",
    "ðŸ§¾",
    "âœ‰ï¸",
    "ðŸ“§",
    "ðŸ“¨",
    "ðŸ“©",
    "ðŸ“¤",
    "ðŸ“¥",
    "ðŸ“¦",
    "ðŸ“«",
    "ðŸ“ª",
    "ðŸ“¬",
    "ðŸ“­",
    "ðŸ“®",
    "ðŸ—³ï¸",

    // Household Items
    "ðŸªž",
    "ðŸªŸ",
    "ðŸ›ï¸",
    "ðŸ›‹ï¸",
    "ðŸª‘",
    "ðŸšª",
    "ðŸš¿",
    "ðŸ›",
    "ðŸª ",
    "ðŸ§´",
    "ðŸ§¼",
    "ðŸ§½",
    "ðŸª¥",
    "ðŸ§»",
    "ðŸš½",
    "ðŸª’",
    "ðŸª®",
    "ðŸ§º",
    "ðŸ§¹",
    "ðŸ§º",
    "ðŸ§¼",
    "ðŸ§½",
    "ðŸª£",

    // Clothing & Accessories
    "ðŸ‘“",
    "ðŸ•¶ï¸",
    "ðŸ¥½",
    "ðŸ¥¼",
    "ðŸ¦º",
    "ðŸ‘”",
    "ðŸ‘•",
    "ðŸ‘–",
    "ðŸ§£",
    "ðŸ§¤",
    "ðŸ§¥",
    "ðŸ§¦",
    "ðŸ‘—",
    "ðŸ‘˜",
    "ðŸ¥»",
    "ðŸ©±",
    "ðŸ©²",
    "ðŸ©³",
    "ðŸ‘™",
    "ðŸ‘š",
    "ðŸ‘›",
    "ðŸ‘œ",
    "ðŸ‘",
    "ðŸ›ï¸",
    "ðŸŽ’",
    "ðŸ‘ž",
    "ðŸ‘Ÿ",
    "ðŸ¥¾",
    "ðŸ¥¿",
    "ðŸ‘ ",
    "ðŸ‘¡",
    "ðŸ©´",
    "ðŸ‘¢",
    "ðŸª®",
    "ðŸ‘‘",
    "ðŸ‘’",
    "ðŸŽ©",
    "ðŸŽ“",
    "ðŸ§¢",
    "ðŸª–",
    "â›‘ï¸",
    "ðŸ“¿",
    "ðŸ’„",
    "ðŸ’",
    "ðŸ’Ž",

    // Signs & Instruments
    "ðŸŽˆ",
    "ðŸŽ‰",
    "ðŸŽŠ",
    "ðŸŽŽ",
    "ðŸŽ",
    "ðŸŽ",
    "ðŸŽ€",
    "ðŸŽ",
    "ðŸª„",
    "ðŸª…",
    "ðŸª†",
    "ðŸ§¸",
    "ðŸª€",
    "ðŸª",
    "âš½",
    "ðŸ€",
    "ðŸˆ",
    "âš¾",
    "ðŸŽ¾",
    "ðŸ",
    "ðŸ‰",
    "ðŸ¥",
    "ðŸŽ±",
    "ðŸ“",
    "ðŸ¸",
    "ðŸ¥…",
    "ðŸ’",
    "ðŸ‘",
    "ðŸ",
    "â›³",
    "ðŸ¹",
    "ðŸŽ£",
    "ðŸ¤¿",
    "ðŸŽ½",
    "ðŸŽ¿",
    "ðŸ›·",
    "ðŸ¥Œ",
    "ðŸŽ¯",
    "ðŸªƒ",
    "ðŸªš",
    "ðŸª“",

    // Art, Music & Misc
    "ðŸŽ¹",
    "ðŸ¥",
    "ðŸª˜",
    "ðŸŽ·",
    "ðŸŽº",
    "ðŸŽ¸",
    "ðŸª•",
    "ðŸŽ»",
    "ðŸŽ¼",
    "ðŸŽ§",
    "ðŸŽ¤",
    "ðŸŽ¬",
    "ðŸŽ®",
    "ðŸ§©",
    "â™Ÿï¸",
    "ðŸƒ",
    "ðŸ€„",
    "ðŸŽ´",
    "ðŸŽ­",
    "ðŸ–¼ï¸",
    "ðŸª©",
    "ðŸªž",
    "ðŸ§®",

    // Religious & Symbolic
    "ðŸ›",
    "âš°ï¸",
    "âš±ï¸",
    "ðŸª¦",
    "ðŸ•‹",
    "â›©ï¸",
    "ðŸ›•",
    "ðŸ•",
    "â›ª",
    "ðŸ•Œ",
    "ðŸ•‹",
    "ðŸ›",
    "ðŸª¯",

    // Transportation-related objects
    "ðŸ›¢ï¸",
    "â›½",
    "ðŸ§­",
    "ðŸš¦",
    "ðŸš¥",
    "ðŸ›‘",
    "ðŸ§±",
    "âš™ï¸",
    "ðŸ› ï¸",
    "ðŸ§°",
    "ðŸ§²",

    // Miscellaneous objects
    "ðŸ”®",
    "ðŸ§¿",
    "ðŸª¬",
    "ðŸ©¸",
    "ðŸ’Š",
    "ðŸ’‰",
    "ðŸ©¹",
    "ðŸ©¼",
    "ðŸ©º",
    "ðŸ©»",
    "ðŸ§¬",
    "ðŸ§ª",
    "ðŸ§«",
    "ðŸ§¯",
    "âš—ï¸",
    "ðŸ§²",
    "ðŸ§±",
    "ðŸ§°",
    "ðŸ§º",
    "ðŸ§´",
    "ðŸ§·",
    "ðŸ§¹",
    "ðŸ§»",
    "ðŸª ",
    "ðŸ§¼",
    "ðŸ§½",
    "ðŸ§¯",

    "ðŸ›¡ï¸",
    "ðŸ”‘",
    "ðŸ—ï¸",
    "ðŸ›’",
    "ðŸ§¨",
    "ðŸ§·",
    "ðŸ§¶",
    "ðŸ§µ",
    "ðŸ§ª",
    "ðŸ§«",
    "ðŸª‘",
    "ðŸ›‹ï¸",
    "ðŸ›ï¸",
    "ðŸ§¸",
    "ðŸ§­",
    "ðŸª©", // mirror ball (disco)
    "ðŸª®", // comb
    "ðŸª¡", // sewing needle
    "ðŸª¢", // knot
    "ðŸª¤", // mousetrap (you have but appears twice â€” keep one)
    "ðŸª£", // bucket
    "ðŸª¤", // (ensure only once)
    "ðŸª¥", // toothbrush
    "ðŸª¦", // headstone
    "ðŸª§", // placard/sign
    "ðŸªª", // identification card
    "ðŸª«", // low battery
    "ðŸª¬", // hamsa (religious)
    "ðŸª­", // folding hand fan
    "ðŸª®", // comb (if not added yet)
    "ðŸª°", // fly (belongs to Animals, but often misc)
    "ðŸª±", // worm (Animals)
    "ðŸª³", // cockroach (Animals)
    "ðŸª´", // potted plant
    "ðŸªµ", // wood log
    "ðŸª¶", // feather
    "ðŸª·", // lotus
    "ðŸª¹", // empty nest
    "ðŸªº", // nest with eggs
  ],

  Symbols: [
    "â¤ï¸",
    "ðŸ§¡",
    "ðŸ’›",
    "ðŸ’š",
    "ðŸ’™",
    "ðŸ’œ",
    "ðŸ–¤",
    "ðŸ¤",
    "ðŸ¤Ž",
    "ðŸ’”",
    "â£ï¸",
    "ðŸ’•",
    "ðŸ’ž",
    "ðŸ’“",
    "ðŸ’—",
    "ðŸ’–",
    "ðŸ’˜",
    "ðŸ’",
    "ðŸ’Ÿ",
    "â˜®ï¸",
    "âœï¸",
    "â˜ªï¸",
    "ðŸ•‰ï¸",
    "â˜¸ï¸",
    "âœ¡ï¸",
    "ðŸ”¯",
    "ðŸ•Ž",
    "â˜¯ï¸",
    "â˜¦ï¸",
    "ðŸ›",
    "â›Ž",
    "â™ˆ",
    "â™‰",
    "â™Š",
    "â™‹",
    "â™Œ",
    "â™",
    "â™Ž",
    "â™",
    "â™",
    "â™‘",
    "â™’",
    "â™“",
    "ðŸ†”",
    "âš›ï¸",
    "ðŸ‰‘",
    "â˜¢ï¸",
    "â˜£ï¸",
    "ðŸ“´",
    "ðŸ“³",
    "ðŸˆ¶",
    "ðŸˆš",
    "ðŸˆ¸",
    "ðŸˆº",
    "ðŸˆ·ï¸",
    "âœ´ï¸",
    "ðŸ†š",
    "ðŸ’®",
    "ðŸ‰",
    "ãŠ™ï¸",
    "ãŠ—ï¸",
    "âœ…",
    "âŒ",
    "â—",
    "â€¼ï¸",
    "â‰ï¸",
    "âš ï¸",
    "ðŸ””",
    "ðŸ”•",
    "ðŸ”‡",
    "ðŸ”ˆ",
    "ðŸ”‰",
    "ðŸ”Š",
    "ðŸ”’",
    "ðŸ”“",
    "ðŸ”",
    "ðŸ”",
    "âš™ï¸",
    "âš–ï¸",
    "âš”ï¸",
    "âš°ï¸",
    "âš±ï¸",
    "âš—ï¸",
    "âš•ï¸",
    "âšœï¸",
    "âœ‚ï¸",
    "âœï¸",
    "âœ’ï¸",
    "âœï¸",
    "âœ‰ï¸",
    "âœˆï¸",
    "âœ¡ï¸",
    "âœ”ï¸",
    "â˜‘ï¸",
    "â˜”",
    "â˜ï¸",
    "â˜ƒï¸",
    "â˜„ï¸",
    "â˜€ï¸",
    "â­",
    "ðŸŒŸ",
    "ðŸŒˆ",
    "â„ï¸",
    "â‡ï¸",
    "âŽ",
    "Â©ï¸",
    "Â®ï¸",
    "â„¢ï¸",
    "âž•",
    "âž–",
    "âž—",
    "âž°",
    "âž¿",
    "âžœ",
    "âž¡ï¸",
    "â¬…ï¸",
    "â¬†ï¸",
    "â¬‡ï¸",
    "â†”ï¸",
    "â†•ï¸",
    "ðŸ”„",
    "ðŸ”",
    "ðŸ”‚",
    "ðŸ”ƒ",
    "ðŸ”¼",
    "ðŸ”½",
    "ðŸ”º",
    "ðŸ”»",
    "ðŸ”¸",
    "ðŸ”¹",
    "ðŸ”¶",
    "ðŸ”·",
    "ðŸ”³",
    "ðŸ”²",
    "â—¼ï¸",
    "â—»ï¸",
    "â—¾",
    "â—½",
    "â–ªï¸",
    "â–«ï¸",
    "ðŸ”˜",
    "ðŸ”´",
    "ðŸŸ ",
    "ðŸŸ¡",
    "ðŸŸ¢",
    "ðŸ”µ",
    "ðŸŸ£",
    "âš«",
    "âšª",
    "ðŸ”º",
    "ðŸ”»",
    "âš§ï¸", // transgender symbol
    "âš°ï¸", // coffin (you have but ensure one)
    "âš±ï¸", // urn
    "ðŸ•Ž", // menorah (duplicate okay)
    "ðŸª¯", // khanda (Sikh)
    "ðŸ•‰ï¸", // om (you have)
    "â˜®ï¸", // peace (you have)
    "â™¾ï¸", // infinity
    "â™»ï¸", // recycling
    "âš™ï¸", // gear (you have)
    "âš’ï¸", // hammer & pick
    "âš—ï¸", // alembic
    "âš•ï¸", // medical
    "âš–ï¸", // balance scale
    "âš”ï¸", // crossed swords
    "âš“", // anchor
    "âš›ï¸", // atom
    "âš¡", // lightning bolt
    "âšœï¸", // fleur-de-lis
    "â›”", // no entry
    "ðŸš«", // prohibited
    "â›ª", // church
    "ðŸ•‹", // kaaba
    "ðŸ•", // synagogue
    "ðŸ•Œ", // mosque
    "ðŸ›•", // hindu temple
    "â›©ï¸", // shinto shrine
    "â›ï¸", // pick
    "ðŸª“", // axe
    "ðŸª", // hook
    "ðŸªž", // mirror
    "ðŸª ", // plunger
  ],
};

export default function EmojiPicker({ customEmojis = [], onSelect, onClose }) {
  const [selectedCategory, setSelectedCategory] = useState("Smileys");
  const [searchTerm, setSearchTerm] = useState("");

  const categories = ["Custom", ...Object.keys(standardEmojis)];

  const getFilteredEmojis = () => {
    if (selectedCategory === "Custom") {
      if (searchTerm) {
        return customEmojis.filter((emoji) =>
          emoji.name.toLowerCase().includes(searchTerm.toLowerCase())
        );
      }
      return customEmojis;
    }

    const categoryEmojis = standardEmojis[selectedCategory] || [];
    return categoryEmojis;
  };

  const filteredEmojis = getFilteredEmojis();

  return (
    <div className={styles.overlay} onClick={onClose}>
      <div className={styles.picker} onClick={(e) => e.stopPropagation()}>
        <div className={styles.header}>
          <input
            type="text"
            placeholder="Search emojis..."
            value={searchTerm}
            onChange={(e) => setSearchTerm(e.target.value)}
            className={styles.search}
          />
          <button onClick={onClose} className={styles.closeButton}>
            âœ•
          </button>
        </div>

        <div className={styles.categories}>
          {categories.map((category) => (
            <button
              key={category}
              className={`${styles.categoryButton} ${
                selectedCategory === category ? styles.active : ""
              }`}
              onClick={() => setSelectedCategory(category)}
            >
              {category}
            </button>
          ))}
        </div>

        <div className={styles.emojiGrid}>
          {filteredEmojis.length === 0 ? (
            <div className={styles.noResults}>No emojis found</div>
          ) : (
            filteredEmojis.map((emoji, index) => {
              if (selectedCategory === "Custom") {
                return (
                  <button
                    key={emoji.id}
                    className={styles.emojiButton}
                    onClick={() => onSelect(emoji)}
                    title={emoji.name}
                  >
                    <img
                      src={emoji.url}
                      alt={emoji.name}
                      className={styles.customEmoji}
                    />
                  </button>
                );
              } else {
                return (
                  <button
                    key={index}
                    className={styles.emojiButton}
                    onClick={() => onSelect({ native: emoji, name: emoji })}
                    title={emoji}
                  >
                    {emoji}
                  </button>
                );
              }
            })
          )}
        </div>
      </div>
    </div>
  );
}
